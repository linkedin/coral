import com.github.jengelman.gradle.plugins.shadow.tasks.ConfigureShadowRelocation

plugins {
  id 'java'
  id 'maven-publish'
  id 'com.github.johnrengelman.shadow'
}

dependencies {
  implementation 'io.trino:trino-parser:355'
}


task relocateShadowJar(type: ConfigureShadowRelocation) {
  target = tasks.shadowJar
  prefix = 'coral.shading'
}

shadowJar {
  dependsOn(relocateShadowJar)
}

assemble.dependsOn shadowJar

publishing {
  publications {
    shadow(MavenPublication) { publication ->
      project.shadow.component(publication)
    }
  }
  repositories {
    maven {
      url "https://mvnrepository.com/artifact/com.linkedin.coral/coral-trino"
    }
  }
}
