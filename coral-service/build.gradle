plugins {
  id 'org.springframework.boot' version '2.1.2.RELEASE'
  id 'io.spring.dependency-management' version '1.0.11.RELEASE'
  id 'java'
}

group = 'com.linkedin.coral'
version = '0.0.1-SNAPSHOT'
sourceCompatibility = '1.8'

repositories {
  mavenCentral()
  maven { url 'https://repo.spring.io/milestone' }
  maven { url 'https://repo.spring.io/snapshot' }
  maven { url "http://conjars.org/repo" }
}

configurations.all {
  exclude module: 'slf4j-log4j12'
  exclude group: 'org.apache.logging.log4j'
  exclude group: 'org.eclipse.jetty.orbit'
  exclude group: 'javax.servlet'
}

dependencies {
  // Spring Boot
  implementation 'org.springframework.boot:spring-boot-starter-web'
  testImplementation 'org.springframework.boot:spring-boot-starter-test:' + '2.6.1'

  // Coral
  implementation 'com.linkedin.coral:coral-common:2.0.62'
  implementation 'com.linkedin.coral:coral-trino:2.0.61'
  implementation 'com.linkedin.coral:coral-hive:2.0.61'
  implementation 'com.linkedin.coral:coral-pig:2.0.61'
  implementation ('com.linkedin.coral:coral-spark:2.0.61') {
    exclude group: 'org.slf4j'
  }
  compile('com.linkedin.coral:coral-trino-parser:2.0.61') {
    artifact {
      name = 'coral-trino-parser'
      extension = 'jar'
      type = 'jar'
    }
  }

  // Hive
  implementation 'org.apache.hive:hive-metastore:1.2.2'
  implementation ('org.apache.hive:hive-exec:1.2.2:core') {
    exclude group: 'jline', module: 'jline'
  }
  implementation ('org.apache.hive:hive-common:1.2.2')

  // Hadoop
  implementation 'org.apache.hadoop:hadoop-common:2.7.0'
  implementation 'org.apache.hadoop:hadoop-mapreduce-client-common:2.7.0'
  implementation 'org.apache.hadoop:hadoop-mapreduce-client-core:2.7.0'

}

tasks.named('test') {
  useJUnitPlatform()
}
